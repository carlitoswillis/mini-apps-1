function List(props) {
  const pairs = props.pairs;
  const listItems = pairs.map(pair => /*#__PURE__*/React.createElement("li", null, `${pair[0]}: ${pair[1]}`));
  return /*#__PURE__*/React.createElement("ul", null, listItems);
}

class SignUp extends React.Component {
  constructor(props) {
    super(props);
    this.state = {};
  }

  onChangeHandler(event) {
    this.setState({
      [event.target.name]: event.target.value
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("form", {
      name: "signup"
    }, /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "name",
      placeholder: "name",
      type: "text",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "email",
      placeholder: "email",
      type: "email",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "password",
      placeholder: "password",
      type: "password",
      defaultValue: ""
    })), /*#__PURE__*/React.createElement("button", {
      onClick: event => {
        this.props.buttonHandler(event, this.state);
      }
    }, "Next"));
  }

}

class Shipping extends React.Component {
  constructor(props) {
    super(props);
    this.state = {};
  }

  onChangeHandler(event) {
    this.setState({
      [event.target.name]: event.target.value
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("form", {
      name: "shipping"
    }, /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "address1",
      placeholder: "address",
      type: "text",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "address2",
      placeholder: "apt number",
      type: "text",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "phone",
      placeholder: "phone number",
      type: "text",
      defaultValue: ""
    })), /*#__PURE__*/React.createElement("button", {
      onClick: event => {
        this.props.buttonHandler(event, this.state);
      }
    }, "Next"));
  }

}

class CardInfo extends React.Component {
  constructor(props) {
    super(props);
    this.state = {};
  }

  onChangeHandler(event) {
    this.setState({
      [event.target.name]: event.target.value
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("form", {
      name: "CardInfo"
    }, /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "cardnumber",
      placeholder: "credit card #",
      type: "text",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "expiration",
      placeholder: "MM/YY",
      type: "text",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "cvv",
      placeholder: "CVV",
      type: "number",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "zipcode",
      placeholder: "zipcode",
      type: "text",
      defaultValue: ""
    })), /*#__PURE__*/React.createElement("button", {
      onClick: event => {
        this.props.buttonHandler(event, this.state);
      }
    }, "Next"));
  }

}

class Forms extends React.Component {
  constructor(props) {
    super(props);
  }

  render() {
    if (this.props.page === -1) {
      return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("p", null, "check out now"), /*#__PURE__*/React.createElement("button", {
        onClick: this.props.buttonHandler
      }, "Checkout"));
    } else if (this.props.page === 0) {
      return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(SignUp, {
        buttonHandler: this.props.buttonHandler
      }));
    } else if (this.props.page === 1) {
      return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(Shipping, {
        buttonHandler: this.props.buttonHandler
      }));
    } else if (this.props.page === 2) {
      return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(CardInfo, {
        buttonHandler: this.props.buttonHandler
      }));
    } else if (this.props.page === 3) {
      return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("p", null, "Verify Your Purchase Info Below"), /*#__PURE__*/React.createElement(List, {
        pairs: this.props.purchase
      }), /*#__PURE__*/React.createElement("button", {
        onClick: this.props.buttonHandler
      }, "Purchase"));
    }
  }

}

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      page: -1,
      currentCustomer: []
    };
  }

  nextPage(event, data) {
    if (this.state.page === -1) {
      // create new database entry,
      var myHeaders = new Headers();
      var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        redirect: 'follow'
      };
      fetch("/customer", requestOptions).then(response => response.text()).then(result => {
        this.setState({
          customerId: result,
          page: 0
        });
      }).catch(error => console.log('error', error));
    } else if (this.state.page <= 2) {
      var myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/json");
      data.id = this.state.customerId;
      var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        body: JSON.stringify(data),
        redirect: 'follow'
      };
      fetch("/customer/info", requestOptions).then(response => response.text()).then(response => {
        var result = [];
        response = JSON.parse(response)[0];
        console.log(response);

        for (var key of Object.keys(response)) {
          result.push([key, response[key]]);
        }

        this.setState({
          purchase: result
        });
      }).catch(error => console.log('error', error));
      var page = this.state.page + 1;
      this.setState({
        page: page,
        currentCustomer: this.state.currentCustomer.concat(data)
      });
    } else {
      this.setState({
        page: -1,
        currentCustomer: [],
        customerId: undefined
      }); // show data off
    }
  }

  render() {
    return /*#__PURE__*/React.createElement("div", {
      className: "App"
    }, /*#__PURE__*/React.createElement("h1", null, "App"), /*#__PURE__*/React.createElement(Forms, {
      buttonHandler: this.nextPage.bind(this),
      page: this.state.page,
      purchase: this.state.purchase
    }));
  }

}

export default App;
ReactDOM.render( /*#__PURE__*/React.createElement(App, null), document.getElementById("container"));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NsaWVudC9hcHAuanN4Il0sIm5hbWVzIjpbIkxpc3QiLCJwcm9wcyIsInBhaXJzIiwibGlzdEl0ZW1zIiwibWFwIiwicGFpciIsIlNpZ25VcCIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJzdGF0ZSIsIm9uQ2hhbmdlSGFuZGxlciIsImV2ZW50Iiwic2V0U3RhdGUiLCJ0YXJnZXQiLCJuYW1lIiwidmFsdWUiLCJyZW5kZXIiLCJiaW5kIiwiYnV0dG9uSGFuZGxlciIsIlNoaXBwaW5nIiwiQ2FyZEluZm8iLCJGb3JtcyIsInBhZ2UiLCJwdXJjaGFzZSIsIkFwcCIsImN1cnJlbnRDdXN0b21lciIsIm5leHRQYWdlIiwiZGF0YSIsIm15SGVhZGVycyIsIkhlYWRlcnMiLCJyZXF1ZXN0T3B0aW9ucyIsIm1ldGhvZCIsImhlYWRlcnMiLCJyZWRpcmVjdCIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwidGV4dCIsInJlc3VsdCIsImN1c3RvbWVySWQiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImFwcGVuZCIsImlkIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsImtleSIsIk9iamVjdCIsImtleXMiLCJwdXNoIiwiY29uY2F0IiwidW5kZWZpbmVkIiwiUmVhY3RET00iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxJQUFULENBQWVDLEtBQWYsRUFBc0I7QUFDcEIsUUFBTUMsS0FBSyxHQUFHRCxLQUFLLENBQUNDLEtBQXBCO0FBQ0EsUUFBTUMsU0FBUyxHQUFHRCxLQUFLLENBQUNFLEdBQU4sQ0FBV0MsSUFBRCxpQkFDMUIsZ0NBQU0sR0FBRUEsSUFBSSxDQUFDLENBQUQsQ0FBSSxLQUFJQSxJQUFJLENBQUMsQ0FBRCxDQUFJLEVBQTVCLENBRGdCLENBQWxCO0FBR0Esc0JBQ0UsZ0NBQUtGLFNBQUwsQ0FERjtBQUdEOztBQUdELE1BQU1HLE1BQU4sU0FB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QUksRUFBRSxLQUFLUixLQUFMLENBQVdhLElBQWpFO0FBQXVFLE1BQUEsUUFBUSxFQUFFLEtBQUtiLEtBQUwsQ0FBV2M7QUFBNUYsTUFGRixDQURGO0FBTUQ7O0FBdkYrQjs7QUEwRmxDLGVBQWVDLEdBQWY7QUFFQWdDLFFBQVEsQ0FBQ3hDLE1BQVQsZUFBZ0Isb0JBQUMsR0FBRCxPQUFoQixFQUF5QnlDLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixXQUF4QixDQUF6QiIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIExpc3QgKHByb3BzKSB7XG4gIGNvbnN0IHBhaXJzID0gcHJvcHMucGFpcnM7XG4gIGNvbnN0IGxpc3RJdGVtcyA9IHBhaXJzLm1hcCgocGFpcikgPT5cbiAgICA8bGk+e2Ake3BhaXJbMF19OiAke3BhaXJbMV19YH08L2xpPlxuICApO1xuICByZXR1cm4gKFxuICAgIDx1bD57bGlzdEl0ZW1zfTwvdWw+XG4gICk7XG59XG5cblxuY2xhc3MgU2lnblVwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7fVxuICB9XG5cbiAgb25DaGFuZ2VIYW5kbGVyIChldmVudCkge1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBbZXZlbnQudGFyZ2V0Lm5hbWVdOiBldmVudC50YXJnZXQudmFsdWVcbiAgICAgIH0pO1xuXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICA8Zm9ybSBuYW1lPSdzaWdudXAnPlxuICAgICAgICA8aW5wdXQgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VIYW5kbGVyLmJpbmQodGhpcyl9IG5hbWU9J25hbWUnIHBsYWNlaG9sZGVyPSduYW1lJyB0eXBlPSd0ZXh0JyBkZWZhdWx0VmFsdWU9JycvPlxuICAgICAgICA8aW5wdXQgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VIYW5kbGVyLmJpbmQodGhpcyl9IG5hbWU9J2VtYWlsJyBwbGFjZWhvbGRlcj0nZW1haWwnIHR5cGU9J2VtYWlsJyBkZWZhdWx0VmFsdWU9JycvPlxuICAgICAgICA8aW5wdXQgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VIYW5kbGVyLmJpbmQodGhpcyl9IG5hbWU9J3Bhc3N3b3JkJyBwbGFjZWhvbGRlcj0ncGFzc3dvcmQnIHR5cGU9J3Bhc3N3b3JkJyBkZWZhdWx0VmFsdWU9JycvPlxuICAgICAgPC9mb3JtPlxuICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5wcm9wcy5idXR0b25IYW5kbGVyKGV2ZW50LCB0aGlzLnN0YXRlKTtcbiAgICAgIH19Pk5leHQ8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuY2xhc3MgU2hpcHBpbmcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHt9XG4gIH1cblxuICBvbkNoYW5nZUhhbmRsZXIgKGV2ZW50KSB7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIFtldmVudC50YXJnZXQubmFtZV06IGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgfSk7XG5cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgIDxmb3JtIG5hbWU9J3NoaXBwaW5nJz5cbiAgICAgICAgPGlucHV0IG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlSGFuZGxlci5iaW5kKHRoaXMpfSBuYW1lPSdhZGRyZXNzMScgcGxhY2Vob2xkZXI9J2FkZHJlc3MnIHR5cGU9J3RleHQnIGRlZmF1bHRWYWx1ZT0nJy8+XG4gICAgICAgIDxpbnB1dCBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZUhhbmRsZXIuYmluZCh0aGlzKX0gbmFtZT0nYWRkcmVzczInIHBsYWNlaG9sZGVyPSdhcHQgbnVtYmVyJyB0eXBlPSd0ZXh0JyBkZWZhdWx0VmFsdWU9JycvPlxuICAgICAgICA8aW5wdXQgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VIYW5kbGVyLmJpbmQodGhpcyl9IG5hbWU9J3Bob25lJyBwbGFjZWhvbGRlcj0ncGhvbmUgbnVtYmVyJyB0eXBlPSd0ZXh0JyBkZWZhdWx0VmFsdWU9JycvPlxuICAgICAgPC9mb3JtPlxuICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5wcm9wcy5idXR0b25IYW5kbGVyKGV2ZW50LCB0aGlzLnN0YXRlKTtcbiAgICAgIH19Pk5leHQ8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuY2xhc3MgQ2FyZEluZm8gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHt9XG4gIH1cblxuICBvbkNoYW5nZUhhbmRsZXIgKGV2ZW50KSB7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIFtldmVudC50YXJnZXQubmFtZV06IGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgfSk7XG5cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgIDxmb3JtIG5hbWU9J0NhcmRJbmZvJz5cbiAgICAgICAgPGlucHV0IG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlSGFuZGxlci5iaW5kKHRoaXMpfSBuYW1lPSdjYXJkbnVtYmVyJyBwbGFjZWhvbGRlcj0nY3JlZGl0IGNhcmQgIycgdHlwZT0ndGV4dCcgZGVmYXVsdFZhbHVlPScnLz5cbiAgICAgICAgPGlucHV0IG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlSGFuZGxlci5iaW5kKHRoaXMpfSBuYW1lPSdleHBpcmF0aW9uJyBwbGFjZWhvbGRlcj0nTU0vWVknIHR5cGU9J3RleHQnIGRlZmF1bHRWYWx1ZT0nJy8+XG4gICAgICAgIDxpbnB1dCBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZUhhbmRsZXIuYmluZCh0aGlzKX0gbmFtZT0nY3Z2JyBwbGFjZWhvbGRlcj0nQ1ZWJyB0eXBlPSdudW1iZXInIGRlZmF1bHRWYWx1ZT0nJy8+XG4gICAgICAgIDxpbnB1dCBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZUhhbmRsZXIuYmluZCh0aGlzKX0gbmFtZT0nemlwY29kZScgcGxhY2Vob2xkZXI9J3ppcGNvZGUnIHR5cGU9J3RleHQnIGRlZmF1bHRWYWx1ZT0nJy8+XG4gICAgICA8L2Zvcm0+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9eyhldmVudCkgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLmJ1dHRvbkhhbmRsZXIoZXZlbnQsIHRoaXMuc3RhdGUpO1xuICAgICAgfX0+TmV4dDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5jbGFzcyBGb3JtcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcblxuICAgIGlmICh0aGlzLnByb3BzLnBhZ2UgPT09IC0xKSB7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPHA+Y2hlY2sgb3V0IG5vdzwvcD5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMucHJvcHMuYnV0dG9uSGFuZGxlcn0+Q2hlY2tvdXQ8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wYWdlID09PSAwKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxTaWduVXAgYnV0dG9uSGFuZGxlcj17dGhpcy5wcm9wcy5idXR0b25IYW5kbGVyfS8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucGFnZSA9PT0gMSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8U2hpcHBpbmcgYnV0dG9uSGFuZGxlcj17dGhpcy5wcm9wcy5idXR0b25IYW5kbGVyfS8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcblxuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wYWdlID09PSAyKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxDYXJkSW5mbyBidXR0b25IYW5kbGVyPXt0aGlzLnByb3BzLmJ1dHRvbkhhbmRsZXJ9Lz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wYWdlID09PSAzKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICA8cD5WZXJpZnkgWW91ciBQdXJjaGFzZSBJbmZvIEJlbG93PC9wPlxuICAgICAgICA8TGlzdCBwYWlycz17dGhpcy5wcm9wcy5wdXJjaGFzZX0vPlxuICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMucHJvcHMuYnV0dG9uSGFuZGxlcn0+UHVyY2hhc2U8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBBcHAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgcGFnZTogLTEsXG4gICAgICBjdXJyZW50Q3VzdG9tZXI6IFtdXG4gICAgfVxuICB9XG5cbiAgbmV4dFBhZ2UgKGV2ZW50LCBkYXRhKSB7XG5cbiAgICBpZiAodGhpcy5zdGF0ZS5wYWdlID09PSAtMSkge1xuICAgICAgLy8gY3JlYXRlIG5ldyBkYXRhYmFzZSBlbnRyeSxcbiAgICAgIHZhciBteUhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgdmFyIHJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogbXlIZWFkZXJzLFxuICAgICAgICByZWRpcmVjdDogJ2ZvbGxvdydcbiAgICAgIH07XG5cbiAgICAgIGZldGNoKFwiL2N1c3RvbWVyXCIsIHJlcXVlc3RPcHRpb25zKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpXG4gICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjdXN0b21lcklkOiByZXN1bHQsXG4gICAgICAgICAgICBwYWdlOiAwXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKCdlcnJvcicsIGVycm9yKSk7XG5cbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUucGFnZSA8PSAyKSB7XG5cbiAgICAgIHZhciBteUhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgbXlIZWFkZXJzLmFwcGVuZChcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICBkYXRhLmlkID0gdGhpcy5zdGF0ZS5jdXN0b21lcklkO1xuICAgICAgdmFyIHJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogbXlIZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnXG4gICAgICB9O1xuXG4gICAgICBmZXRjaChcIi9jdXN0b21lci9pbmZvXCIsIHJlcXVlc3RPcHRpb25zKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlKVswXTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgZm9yICh2YXIga2V5IG9mIE9iamVjdC5rZXlzKHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goW2tleSwgcmVzcG9uc2Vba2V5XV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHB1cmNoYXNlOiByZXN1bHRcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coJ2Vycm9yJywgZXJyb3IpKTtcblxuXG4gICAgICB2YXIgcGFnZSA9IHRoaXMuc3RhdGUucGFnZSArIDE7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgcGFnZTogcGFnZSxcbiAgICAgICAgY3VycmVudEN1c3RvbWVyOiB0aGlzLnN0YXRlLmN1cnJlbnRDdXN0b21lci5jb25jYXQoZGF0YSlcbiAgICAgIH0pO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHBhZ2U6IC0xLFxuICAgICAgICBjdXJyZW50Q3VzdG9tZXI6IFtdLFxuICAgICAgICBjdXN0b21lcklkOiB1bmRlZmluZWRcbiAgICAgIH0pO1xuXG4gICAgICAvLyBzaG93IGRhdGEgb2ZmXG5cblxuICAgIH1cblxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIkFwcFwiPlxuICAgICAgICA8aDE+QXBwPC9oMT5cbiAgICAgICAgPEZvcm1zIGJ1dHRvbkhhbmRsZXI9e3RoaXMubmV4dFBhZ2UuYmluZCh0aGlzKX0gcGFnZT17dGhpcy5zdGF0ZS5wYWdlfSBwdXJjaGFzZT17dGhpcy5zdGF0ZS5wdXJjaGFzZX0vPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcHA7XG5cblJlYWN0RE9NLnJlbmRlcig8QXBwIC8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKSk7Il19