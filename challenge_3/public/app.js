// function List(props) {
//   const numbers = props.numbers;
//   const listItems = numbers.map((number) =>
//     <li>{number}</li>
//   );
//   return (
//     <ul>{listItems}</ul>
//   );
// }
class SignUp extends React.Component {
  constructor(props) {
    super(props);
    this.state = {};
  }

  onChangeHandler(event) {
    this.setState({
      [event.target.name]: event.target.value
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("form", {
      name: "signup"
    }, /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "name",
      placeholder: "name",
      type: "text",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "email",
      placeholder: "email",
      type: "email",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "password",
      placeholder: "password",
      type: "password",
      defaultValue: ""
    })), /*#__PURE__*/React.createElement("button", {
      onClick: event => {
        this.props.buttonHandler(event, this.state);
      }
    }, "Next"));
  }

}

class Shipping extends React.Component {
  constructor(props) {
    super(props);
    this.state = {};
  }

  onChangeHandler(event) {
    this.setState({
      [event.target.name]: event.target.value
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("form", {
      name: "shipping"
    }, /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "address1",
      placeholder: "address",
      type: "text",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "address2",
      placeholder: "apt number",
      type: "text",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "phone",
      placeholder: "phone number",
      type: "text",
      defaultValue: ""
    })), /*#__PURE__*/React.createElement("button", {
      onClick: event => {
        this.props.buttonHandler(event, this.state);
      }
    }, "Next"));
  }

}

class CardInfo extends React.Component {
  constructor(props) {
    super(props);
    this.state = {};
  }

  onChangeHandler(event) {
    this.setState({
      [event.target.name]: event.target.value
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("form", {
      name: "CardInfo"
    }, /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "cardnumber",
      placeholder: "credit card #",
      type: "text",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "expiration",
      placeholder: "MM/YY",
      type: "text",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "cvv",
      placeholder: "CVV",
      type: "number",
      defaultValue: ""
    }), /*#__PURE__*/React.createElement("input", {
      onChange: this.onChangeHandler.bind(this),
      name: "zipcode",
      placeholder: "zipcode",
      type: "text",
      defaultValue: ""
    })), /*#__PURE__*/React.createElement("button", {
      onClick: event => {
        this.props.buttonHandler(event, this.state);
      }
    }, "Next"));
  }

}

class Forms extends React.Component {
  constructor(props) {
    super(props);
  }

  render() {
    if (this.props.page === -1) {
      return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("p", null, "check out now"), /*#__PURE__*/React.createElement("button", {
        onClick: this.props.buttonHandler
      }, "Checkout"));
    } else if (this.props.page === 0) {
      return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(SignUp, {
        buttonHandler: this.props.buttonHandler
      }));
    } else if (this.props.page === 1) {
      return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(Shipping, {
        buttonHandler: this.props.buttonHandler
      }));
    } else if (this.props.page === 2) {
      return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(CardInfo, {
        buttonHandler: this.props.buttonHandler
      }));
    } else if (this.props.page === 3) {
      return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("p", null, "Verify Your Purchase Info Below"), /*#__PURE__*/React.createElement("ol", null, this.props.purchase.map(pair => {
        /*#__PURE__*/
        React.createElement("li", null, " ", `${pair[0]}: ${pair[1]}`, " ");
      })), /*#__PURE__*/React.createElement("button", {
        onClick: this.props.buttonHandler
      }, "Purchase"));
    }
  }

}

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      page: -1,
      currentCustomer: []
    };
  }

  nextPage(event, data) {
    if (this.state.page === -1) {
      // create new database entry,
      var myHeaders = new Headers();
      var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        redirect: 'follow'
      };
      fetch("http://localhost:3000/customer", requestOptions).then(response => response.text()).then(result => {
        this.setState({
          customerId: result,
          page: 0
        });
      }).catch(error => console.log('error', error));
    } else if (this.state.page <= 2) {
      if (this.state.page === 2) {
        event.target.innerHTML = 'Complete';
      }

      var myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/json");
      data.id = this.state.customerId;
      var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        body: JSON.stringify(data),
        redirect: 'follow'
      };
      fetch("http://localhost:3000/customer/info", requestOptions).then(response => response.text()).then(response => {
        var result = [];
        response = JSON.parse(response)[0];
        console.log(response);

        for (var key of Object.keys(response)) {
          result.push([key, response[key]]);
        }

        this.setState({
          purchase: result
        });
      }).catch(error => console.log('error', error));
      var page = this.state.page + 1;
      this.setState({
        page: page,
        currentCustomer: this.state.currentCustomer.concat(data)
      });
    } else if (this.state.page === 3) {// show data off
    } else {// do nothing
      }
  }

  render() {
    return /*#__PURE__*/React.createElement("div", {
      className: "App"
    }, /*#__PURE__*/React.createElement("h1", null, "App"), /*#__PURE__*/React.createElement(Forms, {
      buttonHandler: this.nextPage.bind(this),
      page: this.state.page,
      purchase: this.state.purchase
    }));
  }

}

export default App;
ReactDOM.render( /*#__PURE__*/React.createElement(App, null), document.getElementById("container"));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NsaWVudC9hcHAuanN4Il0sIm5hbWVzIjpbIlNpZ25VcCIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsInN0YXRlIiwib25DaGFuZ2VIYW5kbGVyIiwiZXZlbnQiLCJzZXRTdGF0ZSIsInRhcmdldCIsIm5hbWUiLCJ2YWx1ZSIsInJlbmRlciIsImJpbmQiLCJidXR0b25IYW5kbGVyIiwiU2hpcHBpbmciLCJDYXJkSW5mbyIsIkZvcm1zIiwicGFnZSIsInB1cmNoYXNlIiwibWFwIiwicGFpciIsIkFwcCIsImN1cnJlbnRDdXN0b21lciIsIm5leHRQYWdlIiwiZGF0YSIsIm15SGVhZGVycyIsIkhlYWRlcnMiLCJyZXF1ZXN0T3B0aW9ucyIsIm1ldGhvZCIsImhlYWRlcnMiLCJyZWRpcmVjdCIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwidGV4dCIsInJlc3VsdCIsImN1c3RvbWVySWQiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImlubmVySFRNTCIsImFwcGVuZCIsImlkIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsImtleSIsIk9iamVjdCIsImtleXMiLCJwdXNoIiwiY29uY2F0IiwiUmVhY3RET00iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQSxNQUFNQSxNQUFOLFNBQXFCQyxLQUFLLENBQUNDLFNBQTNCLENBQXFDO0FBQ25DQyxFQUFBQSxXQUFXLENBQUVDLEtBQUYsRUFBUztBQUNsQixVQUFNQSxLQUFOO0FBQ0EsU0FBS0MsS0FBTCxHQUFhLEVBQWI7QUFDRDs7QUFFREMsRUFBQUEsZUFBZSxDQUFFQyxLQUFGLEVBQVM7QUFFdEIsU0FBS0MsUUFBTCxDQUFjO0FBQ1osT0FBQ0QsS0FBSyxDQUFDRSxNQUFOLENBQWFDLElBQWQsR0FBcUJILEtBQUssQ0FBQ0Us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RDs7QUF2RitCOztBQTBGbEMsZUFBZUcsR0FBZjtBQUVBZ0MsUUFBUSxDQUFDMUMsTUFBVCxlQUFnQixvQkFBQyxHQUFELE9BQWhCLEVBQXlCMkMsUUFBUSxDQUFDQyxjQUFULENBQXdCLFdBQXhCLENBQXpCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZnVuY3Rpb24gTGlzdChwcm9wcykge1xuLy8gICBjb25zdCBudW1iZXJzID0gcHJvcHMubnVtYmVycztcbi8vICAgY29uc3QgbGlzdEl0ZW1zID0gbnVtYmVycy5tYXAoKG51bWJlcikgPT5cbi8vICAgICA8bGk+e251bWJlcn08L2xpPlxuLy8gICApO1xuLy8gICByZXR1cm4gKFxuLy8gICAgIDx1bD57bGlzdEl0ZW1zfTwvdWw+XG4vLyAgICk7XG4vLyB9XG5cblxuY2xhc3MgU2lnblVwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7fVxuICB9XG5cbiAgb25DaGFuZ2VIYW5kbGVyIChldmVudCkge1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBbZXZlbnQudGFyZ2V0Lm5hbWVdOiBldmVudC50YXJnZXQudmFsdWVcbiAgICAgIH0pO1xuXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICA8Zm9ybSBuYW1lPSdzaWdudXAnPlxuICAgICAgICA8aW5wdXQgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VIYW5kbGVyLmJpbmQodGhpcyl9IG5hbWU9J25hbWUnIHBsYWNlaG9sZGVyPSduYW1lJyB0eXBlPSd0ZXh0JyBkZWZhdWx0VmFsdWU9JycvPlxuICAgICAgICA8aW5wdXQgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VIYW5kbGVyLmJpbmQodGhpcyl9IG5hbWU9J2VtYWlsJyBwbGFjZWhvbGRlcj0nZW1haWwnIHR5cGU9J2VtYWlsJyBkZWZhdWx0VmFsdWU9JycvPlxuICAgICAgICA8aW5wdXQgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VIYW5kbGVyLmJpbmQodGhpcyl9IG5hbWU9J3Bhc3N3b3JkJyBwbGFjZWhvbGRlcj0ncGFzc3dvcmQnIHR5cGU9J3Bhc3N3b3JkJyBkZWZhdWx0VmFsdWU9JycvPlxuICAgICAgPC9mb3JtPlxuICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5wcm9wcy5idXR0b25IYW5kbGVyKGV2ZW50LCB0aGlzLnN0YXRlKTtcbiAgICAgIH19Pk5leHQ8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuY2xhc3MgU2hpcHBpbmcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHt9XG4gIH1cblxuICBvbkNoYW5nZUhhbmRsZXIgKGV2ZW50KSB7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIFtldmVudC50YXJnZXQubmFtZV06IGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgfSk7XG5cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgIDxmb3JtIG5hbWU9J3NoaXBwaW5nJz5cbiAgICAgICAgPGlucHV0IG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlSGFuZGxlci5iaW5kKHRoaXMpfSBuYW1lPSdhZGRyZXNzMScgcGxhY2Vob2xkZXI9J2FkZHJlc3MnIHR5cGU9J3RleHQnIGRlZmF1bHRWYWx1ZT0nJy8+XG4gICAgICAgIDxpbnB1dCBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZUhhbmRsZXIuYmluZCh0aGlzKX0gbmFtZT0nYWRkcmVzczInIHBsYWNlaG9sZGVyPSdhcHQgbnVtYmVyJyB0eXBlPSd0ZXh0JyBkZWZhdWx0VmFsdWU9JycvPlxuICAgICAgICA8aW5wdXQgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VIYW5kbGVyLmJpbmQodGhpcyl9IG5hbWU9J3Bob25lJyBwbGFjZWhvbGRlcj0ncGhvbmUgbnVtYmVyJyB0eXBlPSd0ZXh0JyBkZWZhdWx0VmFsdWU9JycvPlxuICAgICAgPC9mb3JtPlxuICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5wcm9wcy5idXR0b25IYW5kbGVyKGV2ZW50LCB0aGlzLnN0YXRlKTtcbiAgICAgIH19Pk5leHQ8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuY2xhc3MgQ2FyZEluZm8gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHt9XG4gIH1cblxuICBvbkNoYW5nZUhhbmRsZXIgKGV2ZW50KSB7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIFtldmVudC50YXJnZXQubmFtZV06IGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgfSk7XG5cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgIDxmb3JtIG5hbWU9J0NhcmRJbmZvJz5cbiAgICAgICAgPGlucHV0IG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlSGFuZGxlci5iaW5kKHRoaXMpfSBuYW1lPSdjYXJkbnVtYmVyJyBwbGFjZWhvbGRlcj0nY3JlZGl0IGNhcmQgIycgdHlwZT0ndGV4dCcgZGVmYXVsdFZhbHVlPScnLz5cbiAgICAgICAgPGlucHV0IG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlSGFuZGxlci5iaW5kKHRoaXMpfSBuYW1lPSdleHBpcmF0aW9uJyBwbGFjZWhvbGRlcj0nTU0vWVknIHR5cGU9J3RleHQnIGRlZmF1bHRWYWx1ZT0nJy8+XG4gICAgICAgIDxpbnB1dCBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZUhhbmRsZXIuYmluZCh0aGlzKX0gbmFtZT0nY3Z2JyBwbGFjZWhvbGRlcj0nQ1ZWJyB0eXBlPSdudW1iZXInIGRlZmF1bHRWYWx1ZT0nJy8+XG4gICAgICAgIDxpbnB1dCBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZUhhbmRsZXIuYmluZCh0aGlzKX0gbmFtZT0nemlwY29kZScgcGxhY2Vob2xkZXI9J3ppcGNvZGUnIHR5cGU9J3RleHQnIGRlZmF1bHRWYWx1ZT0nJy8+XG4gICAgICA8L2Zvcm0+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9eyhldmVudCkgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLmJ1dHRvbkhhbmRsZXIoZXZlbnQsIHRoaXMuc3RhdGUpO1xuICAgICAgfX0+TmV4dDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5jbGFzcyBGb3JtcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcblxuICAgIGlmICh0aGlzLnByb3BzLnBhZ2UgPT09IC0xKSB7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPHA+Y2hlY2sgb3V0IG5vdzwvcD5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMucHJvcHMuYnV0dG9uSGFuZGxlcn0+Q2hlY2tvdXQ8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wYWdlID09PSAwKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxTaWduVXAgYnV0dG9uSGFuZGxlcj17dGhpcy5wcm9wcy5idXR0b25IYW5kbGVyfS8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucGFnZSA9PT0gMSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8U2hpcHBpbmcgYnV0dG9uSGFuZGxlcj17dGhpcy5wcm9wcy5idXR0b25IYW5kbGVyfS8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcblxuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wYWdlID09PSAyKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxDYXJkSW5mbyBidXR0b25IYW5kbGVyPXt0aGlzLnByb3BzLmJ1dHRvbkhhbmRsZXJ9Lz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wYWdlID09PSAzKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICA8cD5WZXJpZnkgWW91ciBQdXJjaGFzZSBJbmZvIEJlbG93PC9wPlxuICAgICAgICA8b2w+XG4gICAgICAgICAge3RoaXMucHJvcHMucHVyY2hhc2UubWFwKChwYWlyKSA9PiB7XG4gICAgICAgICAgICA8bGk+IHtgJHtwYWlyWzBdfTogJHtwYWlyWzFdfWB9IDwvbGk+XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvb2w+XG4gICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5wcm9wcy5idXR0b25IYW5kbGVyfT5QdXJjaGFzZTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIEFwcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBwYWdlOiAtMSxcbiAgICAgIGN1cnJlbnRDdXN0b21lcjogW11cbiAgICB9XG4gIH1cblxuICBuZXh0UGFnZSAoZXZlbnQsIGRhdGEpIHtcblxuICAgIGlmICh0aGlzLnN0YXRlLnBhZ2UgPT09IC0xKSB7XG4gICAgICAvLyBjcmVhdGUgbmV3IGRhdGFiYXNlIGVudHJ5LFxuICAgICAgdmFyIG15SGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICB2YXIgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiBteUhlYWRlcnMsXG4gICAgICAgIHJlZGlyZWN0OiAnZm9sbG93J1xuICAgICAgfTtcblxuICAgICAgZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvY3VzdG9tZXJcIiwgcmVxdWVzdE9wdGlvbnMpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSlcbiAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGN1c3RvbWVySWQ6IHJlc3VsdCxcbiAgICAgICAgICAgIHBhZ2U6IDBcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coJ2Vycm9yJywgZXJyb3IpKTtcblxuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5wYWdlIDw9IDIpIHtcblxuICAgICAgaWYgKHRoaXMuc3RhdGUucGFnZSA9PT0gMikge1xuICAgICAgICBldmVudC50YXJnZXQuaW5uZXJIVE1MID0gJ0NvbXBsZXRlJ1xuICAgICAgfVxuXG4gICAgICB2YXIgbXlIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgIG15SGVhZGVycy5hcHBlbmQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgZGF0YS5pZCA9IHRoaXMuc3RhdGUuY3VzdG9tZXJJZDtcbiAgICAgIHZhciByZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IG15SGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgIHJlZGlyZWN0OiAnZm9sbG93J1xuICAgICAgfTtcblxuICAgICAgZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvY3VzdG9tZXIvaW5mb1wiLCByZXF1ZXN0T3B0aW9ucylcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSlbMF07XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgIGZvciAodmFyIGtleSBvZiBPYmplY3Qua2V5cyhyZXNwb25zZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKFtrZXksIHJlc3BvbnNlW2tleV1dKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBwdXJjaGFzZTogcmVzdWx0XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKCdlcnJvcicsIGVycm9yKSk7XG5cblxuICAgICAgdmFyIHBhZ2UgPSB0aGlzLnN0YXRlLnBhZ2UgKyAxO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHBhZ2U6IHBhZ2UsXG4gICAgICAgIGN1cnJlbnRDdXN0b21lcjogdGhpcy5zdGF0ZS5jdXJyZW50Q3VzdG9tZXIuY29uY2F0KGRhdGEpXG4gICAgICB9KTtcblxuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5wYWdlID09PSAzKSB7XG5cbiAgICAgIC8vIHNob3cgZGF0YSBvZmZcblxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG5cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJBcHBcIj5cbiAgICAgICAgPGgxPkFwcDwvaDE+XG4gICAgICAgIDxGb3JtcyBidXR0b25IYW5kbGVyPXt0aGlzLm5leHRQYWdlLmJpbmQodGhpcyl9IHBhZ2U9e3RoaXMuc3RhdGUucGFnZX0gcHVyY2hhc2U9e3RoaXMuc3RhdGUucHVyY2hhc2V9Lz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwO1xuXG5SZWFjdERPTS5yZW5kZXIoPEFwcCAvPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIikpOyJdfQ==